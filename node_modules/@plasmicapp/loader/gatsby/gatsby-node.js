"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const upath_1 = __importDefault(require("upath"));
const shared_1 = require("../shared");
exports.onPreBootstrap = (_, pluginOptions) => {
    const defaultDir = pluginOptions.dir || process.cwd();
    const defaultOptions = {
        initArgs: {
            platform: "gatsby",
            "pages-dir": "./pages",
            "images-public-dir": "../../../public",
            "src-dir": "./components",
        },
        dir: defaultDir,
        watch: process.env.NODE_ENV === "development",
        plasmicDir: upath_1.default.join(defaultDir, ".cache", ".plasmic"),
        pageDir: upath_1.default.join(defaultDir, "src", "pages"),
    };
    return shared_1.generateEntrypoint({
        ...defaultOptions,
        ...pluginOptions,
    });
};
